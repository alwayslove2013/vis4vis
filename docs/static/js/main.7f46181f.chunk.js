(this.webpackJsonpvis4vis=this.webpackJsonpvis4vis||[]).push([[0],{120:function(e,t,n){e.exports=n(185)},125:function(e,t,n){},126:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},182:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(16),i=n.n(r),s=(n(125),n(39)),l=n(8),o=n.n(l),u=n(38),f=n(10),d=(n(126),n(127),n(128),n(129),function(e){var t=e.unitBlock,n=e.handleClick;return t.sort((function(e,t){return t.CitationCount-e.CitationCount})),c.a.createElement("div",{className:"unit-block-container"},t.map((function(e){return c.a.createElement(m,{key:e.Title,title:e.Title,count:e.CitationCount,doi:e.DOI,handleClick:n,unit:e})})))}),m=function(e){var t=e.title,n=e.count,a=e.doi,r=e.handleClick,i=e.unit,s=i.All_China,l=i.All_Japan,o=i.All_Korea,u=i.Has_Korea,f={opacity:n>100?.6:n/200+.1},d=["unit","True"==s&&"All_China","True"==l&&"All_Japan","True"==o&&"All_Korea","True"==i.Has_China&&"Has_China","True"==i.Has_Japan&&"Has_Japan","True"==u&&"Has_Korea",i.isReadSelected&&"isRead"].filter((function(e){return e})).join(" ");return c.a.createElement("div",{title:t,className:d,id:"unit-".concat(a),style:f,onClick:function(e){e.stopPropagation(),r(i)}})},h=n(24),v=function(e){for(var t=e.data,n=e.handleClick,a=["SciVis","InfoVis","VAST","PacificVis"],r=[],i=2019;i>=1990;i--)r.push(i);var s={};return a.forEach((function(e){s[e]={},r.forEach((function(t){s[e][t]=[]}))})),t.filter((function(e){return e.Year<=2019})).forEach((function(e){var t="Vis"===e.Conference?"SciVis":e.Conference,n=e.Year;s[t][n].push(e)})),c.a.createElement("div",{className:"unit-view-container"},c.a.createElement("div",{className:"blank"}),r.map((function(e){return c.a.createElement(p,{key:e,year:e})})),a.map((function(e){return c.a.createElement(c.a.Fragment,{key:e},c.a.createElement("div",{className:"row-header"},e),r.map((function(t){return c.a.createElement(d,{key:e+t,unitBlock:s[e][t],handleClick:n})})))})))},p=function(e){var t=e.year;return c.a.createElement("div",{className:"col-header"},t)},E=(n(130),function(e){var t=e.title,n=e.affliation;return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"title"},t),c.a.createElement("div",{className:"title"},n))}),g=(n(131),n(188)),C=n(189),b=n(193),k=n(191),O=n(190),j=n(68),w=["Lgz","Cs","Ycl","Jrk","Lc","Ljc","Ycf","Lyc","Shn","Tm","Lzx","Ydy","Ych","Lyd","Wdt","Wc","Wh","Tsc","Yjc","Lsh","Lz"],y=n(192),N=y.a.CheckableTag,x=function(e){var t=e.title,n=void 0===t?"":t,r=e.refetchUsers,i=void 0===r?function(){}:r,l=Object(a.useState)([]),d=Object(f.a)(l,2),m=d[0],h=d[1],v=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://vis.pku.edu.cn/vis4vis/getUser").then((function(e){return e.json()})).then((function(e){var t=Object(j.get)(e,n,"");h(t.split(","))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){v()}),[]);var p=function(e,t){var a=t?[].concat(Object(s.a)(m),[e]):m.filter((function(t){return t!==e}));console.log("nextList",a),function(e,t){fetch("http://vis.pku.edu.cn/vis4vis/setUser?"+"title=".concat(e,"&users=").concat(t)).then((function(){v(),i()}))}(n,a.join(",")),h(a)};return c.a.createElement("div",null,w.map((function(e){return c.a.createElement(N,{key:e,checked:m.indexOf(e)>-1,onChange:function(t){return p(e,t)}},e)})))},A=g.a.Title,_=g.a.Text,T=g.a.Paragraph,S=C.a.Option,D=function(e){var t=e.selectedPaper,n=e.refetchUsers,r=void 0===n?function(){}:n;console.log("selectedPaper",t);var i=Object(a.useState)("write something"),s=Object(f.a)(i,2),l=s[0],d=s[1],m=t.AuthorNames||"",h=t.Countries||"",v=Object(a.useState)({}),p=Object(f.a)(v,2),E=p[0],g=p[1],j=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://vis.pku.edu.cn/vis4vis/getClassic").then((function(e){return e.json()})).then((function(e){g(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){j()}),[]);var w=["graph","network","trajectory","tree","data","volume rendering"].map((function(e){return c.a.createElement(S,{key:e},e)})),y=!!E[t.originDoi];return console.log("isClassic",y,E[t.originDoi],E),c.a.createElement("div",{className:"detail-view"},c.a.createElement(A,{level:4},t.Title),c.a.createElement(b.b,{direction:"vertical"},c.a.createElement(_,null,m.split(";").join("; ")),c.a.createElement(_,null,h.split(";").join("; ")),c.a.createElement(_,null,c.a.createElement(O.a,{style:{marginRight:10}}),"Classic"," ",c.a.createElement(k.a,{size:"small",checked:y,style:{marginLeft:10},onChange:function(){fetch("http://vis.pku.edu.cn/vis4vis/setClassic?doi=".concat(t.originDoi)).then((function(){j()}))}})),c.a.createElement(_,null,c.a.createElement(O.a,{style:{marginRight:10}}),"Tags"," ",c.a.createElement(C.a,{size:"small",mode:"tags",style:{width:"60%",marginLeft:5,marginTop:5},placeholder:"Select or Add Tags",onChange:function(e){console.log("selected ".concat(e))}},w)),c.a.createElement(x,{title:t.Title,key:t.Title,refetchUsers:r}),c.a.createElement(_,null,c.a.createElement(O.a,{style:{marginRight:10}}),"Comment"),c.a.createElement(T,{type:"secondary",editable:{icon:c.a.createElement(O.a,null),tooltip:"click to edit text",onChange:d,maxLength:1e4,autoSize:{maxRows:20,minRows:3}}},l),c.a.createElement(T,{type:"secondary",ellipsis:{rows:4,expandable:!0,symbol:"more"}},t.Abstract)))},I=(n(182),y.a.CheckableTag),U=function(e){var t=e.selectedUsers,n=void 0===t?[]:t,r=e.setSelectedUsers,i=void 0===r?function(){}:r,l=function(e,t){h.selectAll(".".concat(e.class)).classed(e.select,t)},d=Object(a.useState)([]),m=Object(f.a)(d,2),v=m[0],p=m[1],E=Object(a.useState)({}),g=Object(f.a)(E,2),C=g[0],b=g[1],k=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://vis.pku.edu.cn/vis4vis/getClassic").then((function(e){return e.json()})).then((function(e){console.log("res2",e),b(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){k();var e=Object.keys(C).filter((function(e){return C[e]})).map((function(e){return e.replaceAll("/","").replaceAll(".","").replaceAll("#","")}));v.indexOf("Classic")>-1?e.forEach((function(e){h.select("#unit-".concat(e)).classed("selected",!0)})):e.forEach((function(e){h.select("#unit-".concat(e)).classed("selected",!1)}))}),[v]),c.a.createElement("div",{className:"control-view"},c.a.createElement("div",{className:"control-panel-country"},c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"control-view-header"},"Chinese"),c.a.createElement("div",{className:"control-view-header"},"Japanese"),c.a.createElement("div",{className:"control-view-header"},"Korean"),[{text:"I",class:"All_China",select:"all-china",buttonClass:"active-button-china"},{text:"I",class:"All_Japan",select:"all-japan",buttonClass:"active-button-japan"},{text:"I",class:"All_Korea",select:"all-korea",buttonClass:"active-button-korea"},{text:"C",class:"Has_China",select:"has-china",buttonClass:"active-button-china"},{text:"C",class:"Has_Japan",select:"has-japan",buttonClass:"active-button-japan"},{text:"C",class:"Has_Korea",select:"has-korea",buttonClass:"active-button-korea"}].map((function(e,t){return c.a.createElement(L,{key:t,button:e,handleClick:l})})))),c.a.createElement("div",{className:"control-panel-classic control-tags"},c.a.createElement("div",{className:"control-panel-classic-title"},"Tags"),["Classic","Graph","Data","ML","Volume"].map((function(e){return c.a.createElement(I,{key:e,checked:v.indexOf(e)>-1,onChange:function(t){return function(e,t){var n=t?[].concat(Object(s.a)(v),[e]):v.filter((function(t){return t!==e}));console.log("nextSelectedTags",n),p(n)}(e,t)}},e)}))),c.a.createElement("div",{className:"control-panel-classic control-users"},c.a.createElement("div",{className:"control-panel-classic-title"},"Users"),c.a.createElement("div",{className:"control-panel-classic-tags"},w.map((function(e){return c.a.createElement(I,{key:e,checked:n.indexOf(e)>-1,onChange:function(t){return function(e,t){var a=t?[].concat(Object(s.a)(n),[e]):n.filter((function(t){return t!==e}));console.log("nextSelectedUsers",a),i(a)}(e,t)}},e)})))))},L=function(e){var t=e.button,n=e.handleClick,a=c.a.useState(!1),r=Object(f.a)(a,2),i=r[0],s=r[1],l=["button",i&&t.buttonClass].filter((function(e){return e})).join(" "),o=h.selectAll(".".concat(t.class)).nodes().length;return c.a.createElement("div",{className:l,onClick:function(){return n(t,!i),void s(!i)}},t.text," ","(".concat(i?o:0,")"))},V=function(){var e=c.a.useState([]),t=Object(f.a)(e,2),n=t[0],r=t[1],i=c.a.useState({}),l=Object(f.a)(i,2),d=l[0],m=l[1];c.a.useEffect((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.csv("ieee_vis_1990_2019[countries]_1116.csv");case 2:return t=e.sent,e.next=5,h.csv("pvis_1990_2020_countries.csv");case 5:n=e.sent,(a=t.concat(n)).forEach((function(e){e.originDoi=e.DOI.concat(),e.DOI=e.DOI.replaceAll("/","").replaceAll(".","").replaceAll("#","")})),r(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var p=c.a.useMemo((function(){var e={},t={},a={};return n.forEach((function(n){var c=n.InternalReferences.split(";"),r=n.DOI;e[r]=n,c.forEach((function(e){e=e.replaceAll("/","").replaceAll(".","").replaceAll("#",""),r in t?t[r].push(e):t[r]=[e],e in a?a[e].push(r):a[e]=[r]}))})),{doi2paper:e,refNet:t,citedNet:a}}),[n]),g=(p.doi2paper,p.refNet),C=p.citedNet,b=Object(a.useState)([]),k=Object(f.a)(b,2),O=k[0],w=k[1];Object(a.useEffect)((function(){var e=Object(s.a)(n);e.forEach((function(e){e.isReadSelected=O.filter((function(t){return e.isReadUsers&&e.isReadUsers.has(t)})).length>0})),r(e)}),[O]);var y=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://vis.pku.edu.cn/vis4vis/getUser").then((function(e){return e.json()})).then((function(e){console.log("title2users",e),n.forEach((function(t){var n=Object(j.get)(e,t.Title,""),a=new Set(n.split(","));t.isReadUsers=a}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){y()}),[n]);return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"HeaderContainer"},c.a.createElement(E,{title:"Vis for Vis",affliation:"PKU Vis"})),c.a.createElement("div",{className:"ContentContainer"},c.a.createElement("div",{className:"ControlViewContainer"},c.a.createElement(U,{selectedUsers:O,setSelectedUsers:w})),c.a.createElement("div",{className:"MainViewContainer",onClick:function(){var e=g[d.DOI]||[],t=C[d.DOI]||[];h.select("#unit-".concat(d.DOI)).classed("selected",!1),e.forEach((function(e){h.select("#unit-".concat(e)).classed("selected-ref",!1)})),t.forEach((function(e){h.select("#unit-".concat(e)).classed("selected-cited",!1)}))}},c.a.createElement(v,{data:n,handleClick:function(e){var t=e.DOI;if(console.log("selected",t),t&&t!==d.DOI){var n=g[d.DOI]||[],a=C[d.DOI]||[];h.select("#unit-".concat(d.DOI)).classed("selected",!1),n.forEach((function(e){h.select("#unit-".concat(e)).classed("selected-ref",!1)})),a.forEach((function(e){h.select("#unit-".concat(e)).classed("selected-cited",!1)})),n=g[t]||[],a=C[t]||[],h.select("#unit-".concat(t)).classed("selected",!0),n.forEach((function(e){h.select("#unit-".concat(e)).classed("selected-ref",!0)})),a.forEach((function(e){h.select("#unit-".concat(e)).classed("selected-cited",!0)}))}m(e)}})),c.a.createElement("div",{className:"DetalViewContainer"},c.a.createElement(D,{selectedPaper:d,refetchUsers:function(){return y()}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(96),n(183),n(184);window.d3=h,i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[120,1,2]]]);
//# sourceMappingURL=main.7f46181f.chunk.js.map